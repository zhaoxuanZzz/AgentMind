# AgentMind å‰ç«¯é‡æ„æ–¹æ¡ˆ

## ä¸€ã€é¡¹ç›®æ¦‚è¿°

åŸºäº `@ant-design/x-sdk` å’Œ `antd` ç»„ä»¶åº“é‡æ„ AgentMind å‰ç«¯é¡¹ç›®ï¼Œæ‰“é€ ç°ä»£åŒ–ã€ç¾è§‚ç®€æ´çš„ AI å¯¹è¯ç³»ç»Ÿç•Œé¢ã€‚

### è®¾è®¡åŸåˆ™
- **ç®€æ´ç¾è§‚**ï¼šç•Œé¢ä»¥ç™½è‰²ä¸ºä¸»ï¼Œæµ…è“è‰²ä¸ºè¾…ï¼Œè¥é€ æ¸…çˆ½ä¸“ä¸šçš„è§†è§‰æ•ˆæœ
- **ç”¨æˆ·ä½“éªŒ**ï¼šæµç•…çš„äº¤äº’åŠ¨ç”»ï¼Œæ¸…æ™°çš„ä¿¡æ¯å±‚çº§
- **AI ä¼˜å…ˆ**ï¼šå……åˆ†åˆ©ç”¨ @ant-design/x-sdk çš„ AI å¯¹è¯èƒ½åŠ›
- **å“åº”å¼è®¾è®¡**ï¼šé€‚é…å„ç§å±å¹•å°ºå¯¸

---

## Clarifications

### Session 2026-01-24
- Q: æš—è‰²æ¨¡å¼æ”¯æŒ - æ–¹æ¡ˆç›®å‰è®¾è®¡ä¸ºç™½è‰²æµ…è“è‰²çš„æµ…è‰²ä¸»é¢˜ï¼Œæ˜¯å¦éœ€è¦ä¿ç•™ç°æœ‰çš„æš—è‰²æ¨¡å¼æ”¯æŒï¼Ÿ â†’ A: ä»…å®ç°æµ…è‰²æ¨¡å¼ï¼Œç§»é™¤æš—è‰²æ¨¡å¼
- Q: ç»„ä»¶æ‹†åˆ†ç²’åº¦ - å½“å‰ ChatPage.tsx æœ‰ 1298 è¡Œä»£ç ã€‚é‡æ„æ—¶çš„ç»„ä»¶æ‹†åˆ†ç²’åº¦åº”è¯¥å¦‚ä½•ï¼Ÿ â†’ A: ä¸­ç­‰ç²’åº¦æ‹†åˆ† - æŒ‰åŠŸèƒ½æ¨¡å—æ‹†åˆ†ï¼Œå¹³è¡¡å¯ç»´æŠ¤æ€§å’Œå¤æ‚åº¦
- Q: æµå¼è¯·æ±‚å¤„ç†ç­–ç•¥ - å¯¹äº XRequest æµå¼å¯¹è¯ï¼Œå½“å‰åç«¯è¿”å›çš„æ•°æ®æ ¼å¼æ˜¯ä»€ä¹ˆï¼Ÿåº”è¯¥å¦‚ä½•å¤„ç†ä¸åŒçš„æ•°æ®å—ç±»å‹ï¼ˆå†…å®¹ã€æ€è€ƒè¿‡ç¨‹ã€å·¥å…·è°ƒç”¨ï¼‰ï¼Ÿ â†’ A: å®šä¹‰ç»Ÿä¸€çš„æµå¼æ•°æ®æ ¼å¼æ¥å£ï¼Œtype å­—æ®µåŒºåˆ†ä¸åŒå—ç±»å‹
- Q: ç°æœ‰åŠŸèƒ½ä¿ç•™ç­–ç•¥ - é‡æ„æ—¶æ˜¯å¦éœ€è¦å®Œå…¨ä¿ç•™ç°æœ‰çš„æ‰€æœ‰åŠŸèƒ½ï¼ŸåŒ…æ‹¬ï¼šæ·±æ€æ¨¡å¼ã€çŸ¥è¯†åº“é€‰æ‹©ã€è§’è‰²é¢„è®¾ã€æœç´¢æä¾›å•†é€‰æ‹©ç­‰ã€‚ â†’ A: ç¬¬ä¸€é˜¶æ®µä¿ç•™æ ¸å¿ƒåŠŸèƒ½ï¼Œå…¶ä»–é…ç½®é¡¹ç®€åŒ–åˆ°è®¾ç½®é¢æ¿ï¼Œé€æ­¥ä¼˜åŒ–
- Q: æ€§èƒ½ä¼˜åŒ–ä¼˜å…ˆçº§ - åœ¨æ€§èƒ½ä¼˜åŒ–ä¸­ï¼Œè™šæ‹Ÿæ»šåŠ¨ï¼ˆreact-windowï¼‰å¯¹é•¿æ¶ˆæ¯åˆ—è¡¨å¾ˆé‡è¦ã€‚ä½†å®æ–½å¤æ‚åº¦è¾ƒé«˜ã€‚ç¬¬ä¸€é˜¶æ®µåº”è¯¥ä¼˜å…ˆå¤„ç†å“ªäº›æ€§èƒ½é—®é¢˜ï¼Ÿ â†’ A: åŸºç¡€ä¼˜åŒ–ä¼˜å…ˆï¼ˆMemoã€é˜²æŠ–ã€ä»£ç åˆ†å‰²ï¼‰ï¼Œè™šæ‹Ÿæ»šåŠ¨åç»­è¿­ä»£

---

## è§„èŒƒè¦†ç›–æ€»ç»“

### å·²è§£å†³çš„å…³é”®å†³ç­–ç‚¹

| ç±»åˆ« | çŠ¶æ€ | è¯¦æƒ… |
|------|------|------|
| **ä¸»é¢˜è®¾è®¡** | âœ… å·²è§£å†³ | ä»…æµ…è‰²æ¨¡å¼ï¼Œé¢œè‰²æ–¹æ¡ˆé‡‡ç”¨æ¸…æ–°æ·¡é›… |
| **åŠŸèƒ½èŒƒå›´** | âœ… å·²è§£å†³ | æ ¸å¿ƒåŠŸèƒ½ä¿ç•™ï¼Œé…ç½®é¡¹æ”¶æ•›åˆ°è®¾ç½®é¢æ¿ |
| **ç»„ä»¶æ¶æ„** | âœ… å·²è§£å†³ | ä¸­ç­‰ç²’åº¦æ‹†åˆ†ï¼ŒæŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡ |
| **æ•°æ®æµå¤„ç†** | âœ… å·²è§£å†³ | ç»Ÿä¸€æµå¼æ•°æ®æ ¼å¼ï¼Œtype å­—æ®µåŒºåˆ†ç±»å‹ |
| **æ€§èƒ½ç­–ç•¥** | âœ… å·²è§£å†³ | åŸºç¡€ä¼˜åŒ–ä¼˜å…ˆï¼Œè™šæ‹Ÿæ»šåŠ¨ Phase 4 |

### éœ€æ±‚è¦†ç›–è¡¨

| ç±»åˆ« | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| **åŠŸèƒ½èŒƒå›´ä¸è¡Œä¸º** | Clear | æ ¸å¿ƒåŠŸèƒ½ã€é…ç½®ç®€åŒ–ã€æ¸è¿›ä¼˜åŒ– |
| **ç”¨æˆ·ç•Œé¢/äº¤äº’æµ** | Clear | æµ…è‰²ä¸»é¢˜ã€æ¨¡å—åŒ–å¸ƒå±€ã€å“åº”å¼è®¾è®¡ |
| **éåŠŸèƒ½å±æ€§** | Clear | æ€§èƒ½ä¼˜åŒ–åˆ†é˜¶æ®µã€åŸºç¡€ä¼˜åŒ–ä¼˜å…ˆ |
| **é›†æˆä¸ä¾èµ–** | Clear | @ant-design/x-sdkã€framer-motion ç­‰ |
| **ç»„ä»¶ä¸æ•°æ®æ¨¡å‹** | Clear | ä¸­ç­‰ç²’åº¦æ‹†åˆ†ã€ç»Ÿä¸€æµå¼æ ¼å¼ |
| **çº¦æŸä¸æƒè¡¡** | Clear | å•ä¸€æµ…è‰²ä¸»é¢˜ã€ç¬¬ä¸€é˜¶æ®µåŠŸèƒ½ç®€åŒ– |

### ä¸‹ä¸€æ­¥å»ºè®®

âœ… **æ¾„æ¸…è¿‡ç¨‹å®Œæˆ** - æ‰€æœ‰å…³é”®å†³ç­–å·²ç¡®è®¤ï¼Œè§„èŒƒå¯è¿›å…¥å®æ–½é˜¶æ®µ

**åç»­æµç¨‹:**
1. åˆ›å»º feature åˆ†æ”¯ï¼š`001-frontend-refactor`
2. æ‰§è¡Œ Phase 1ï¼ˆåŸºç¡€æ¶æ„ï¼‰
3. å¢é‡äº¤ä»˜å„ Phaseï¼Œæ¯å‘¨ä¸€ä¸ªå¯äº¤ä»˜ç‰ˆæœ¬
4. ä¿æŒä¸è§„èŒƒæ–‡æ¡£çš„åŒæ­¥

---

## äºŒã€é…è‰²æ–¹æ¡ˆå»ºè®®

### æ–¹æ¡ˆä¸€ï¼šæ¸…æ–°æ·¡é›…ï¼ˆæ¨èï¼‰
```css
/* ä¸»è‰²è°ƒ */
--primary-color: #1677ff;        /* èš‚èšè“ - ä¸»è¦æ“ä½œæŒ‰é’® */
--primary-light: #4096ff;        /* æµ…è“ - æ‚¬åœçŠ¶æ€ */
--primary-lighter: #e6f4ff;      /* ææµ…è“ - èƒŒæ™¯è¾…åŠ© */

/* èƒŒæ™¯è‰² */
--bg-primary: #ffffff;           /* çº¯ç™½ - ä¸»èƒŒæ™¯ */
--bg-secondary: #f5f8fc;         /* æµ…ç°è“ - æ¬¡è¦èƒŒæ™¯ */
--bg-tertiary: #f0f5ff;          /* ææµ…è“ - å¡ç‰‡èƒŒæ™¯ */

/* æ–‡å­—é¢œè‰² */
--text-primary: #1d2129;         /* æ·±ç° - ä¸»è¦æ–‡å­— */
--text-secondary: #4e5969;       /* ä¸­ç° - æ¬¡è¦æ–‡å­— */
--text-tertiary: #86909c;        /* æµ…ç° - è¾…åŠ©æ–‡å­— */

/* è¾¹æ¡†é¢œè‰² */
--border-color: #e5e8ef;         /* æµ…ç° - åˆ†éš”çº¿ */
--border-hover: #91caff;         /* æµ…è“ - æ‚¬åœè¾¹æ¡† */

/* åŠŸèƒ½è‰² */
--success-color: #52c41a;        /* æˆåŠŸç»¿ */
--warning-color: #faad14;        /* è­¦å‘Šæ©™ */
--error-color: #ff4d4f;          /* é”™è¯¯çº¢ */
```

### æ–¹æ¡ˆäºŒï¼šç§‘æŠ€æ„Ÿæµ…è‰²
```css
/* ä¸»è‰²è°ƒ */
--primary-color: #0084ff;        /* ç§‘æŠ€è“ */
--primary-light: #4da3ff;        /* æ˜äº®è“ */
--primary-lighter: #d9eeff;      /* å†°è“ */

/* èƒŒæ™¯è‰² */
--bg-primary: #fafbfc;           /* æµ…ç°ç™½ */
--bg-secondary: #f0f4f8;         /* ç°è“ */
--bg-tertiary: #e8f0fe;          /* æµ…è“ç™½ */

/* æ–‡å­—é¢œè‰² */
--text-primary: #202124;         /* æ¥è¿‘é»‘ */
--text-secondary: #5f6368;       /* ä¸­ç° */
--text-tertiary: #9aa0a6;        /* æµ…ç° */
```

### æ–¹æ¡ˆä¸‰ï¼šæç®€å•†åŠ¡
```css
/* ä¸»è‰²è°ƒ */
--primary-color: #2f54eb;        /* å•†åŠ¡è“ */
--primary-light: #597ef7;        /* ä¸­è“ */
--primary-lighter: #f0f5ff;      /* æ·¡è“ */

/* èƒŒæ™¯è‰² */
--bg-primary: #ffffff;           /* çº¯ç™½ */
--bg-secondary: #fafafa;         /* ææµ…ç° */
--bg-tertiary: #f5f8fa;          /* ç°ç™½ */

/* æ–‡å­—é¢œè‰² */
--text-primary: #262626;         /* æ·±ç°é»‘ */
--text-secondary: #595959;       /* ä¸­ç° */
--text-tertiary: #8c8c8c;        /* æµ…ç° */
```

---

## ä¸‰ã€æŠ€æœ¯æ ˆå‡çº§

### å½“å‰æŠ€æœ¯æ ˆ
- React 18 + TypeScript
- Ant Design 5.x
- Vite
- React Router DOM
- Axios

### æ–°å¢/å‡çº§
- **Ant Design 6.x**: å‡çº§ä»¥æ”¯æŒ @ant-design/xï¼ˆâœ… å·²å®Œæˆï¼‰
- **@ant-design/x**: AI ä¸“ç”¨ UI ç»„ä»¶åº“ï¼ˆBubbleã€Conversationsã€Sender ç­‰ï¼‰ï¼ˆâœ… å·²å®‰è£…ï¼‰
- **@ant-design/x-sdk**: AI å¯¹è¯æµå¼å¤„ç†ï¼ˆâœ… å·²å®‰è£…ï¼‰
- **framer-motion**: æµç•…åŠ¨ç”»æ•ˆæœ
- **react-markdown**: Markdown æ¸²æŸ“ä¼˜åŒ–
- **highlight.js**: ä»£ç é«˜äº®ï¼ˆâœ… å·²å®‰è£…ï¼‰

---

## å››ã€æ ¸å¿ƒåŠŸèƒ½æ¨¡å—é‡æ„

### 4.1 èŠå¤©é¡µé¢ (ChatPage)

#### 4.1.1 ä½¿ç”¨ XRequest æ›¿æ¢åŸæœ‰æµå¼è¯·æ±‚
```typescript
import { XRequest } from '@ant-design/x-sdk';

// åŸæœ‰çš„ EventSource æ”¹ä¸º XRequest
const sendMessage = async (content: string) => {
  setLoading(true);
  
  await XRequest('/api/chat/stream', {
    params: {
      message: content,
      conversation_id: conversationId,
      provider: selectedProvider,
      model: selectedModel,
      use_knowledge: useKnowledge,
    },
    callbacks: {
      onUpdate: (data) => {
        // å®æ—¶æ›´æ–°æ¶ˆæ¯å†…å®¹
        updateStreamingMessage(data);
      },
      onSuccess: (result) => {
        // å®Œæˆåçš„å¤„ç†
        setLoading(false);
        finalizeMessage(result);
      },
      onError: (error) => {
        message.error('å‘é€å¤±è´¥');
        setLoading(false);
      },
    },
  });
};
```

#### 4.1.2 ç•Œé¢å¸ƒå±€ä¼˜åŒ–
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header: Logo + å¯¼èˆªèœå• + æ¨¡å‹é€‰æ‹© + ä¸»é¢˜åˆ‡æ¢         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              â”‚                                     â”‚ â”‚
â”‚  â”‚  ä¼šè¯åˆ—è¡¨    â”‚      æ¶ˆæ¯åŒºåŸŸ                       â”‚ â”‚
â”‚  â”‚  (Sider)     â”‚      - AI æ¶ˆæ¯                      â”‚ â”‚
â”‚  â”‚              â”‚      - ç”¨æˆ·æ¶ˆæ¯                     â”‚ â”‚
â”‚  â”‚  + æ–°å»ºå¯¹è¯  â”‚      - æ€è€ƒè¿‡ç¨‹                     â”‚ â”‚
â”‚  â”‚              â”‚      - å·¥å…·è°ƒç”¨                     â”‚ â”‚
â”‚  â”‚  å†å²å¯¹è¯    â”‚                                     â”‚ â”‚
â”‚  â”‚  åˆ—è¡¨        â”‚                                     â”‚ â”‚
â”‚  â”‚              â”‚                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  è¾“å…¥æ¡† + å·¥å…·æ  + å‘é€æŒ‰é’®                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.1.3 ç»„ä»¶æ‹†åˆ†
```
ChatPage/
â”œâ”€â”€ index.tsx                    # ä¸»å®¹å™¨
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ConversationSidebar/    # ä¼šè¯ä¾§è¾¹æ 
â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”œâ”€â”€ ConversationItem.tsx
â”‚   â”‚   â””â”€â”€ NewChatButton.tsx
â”‚   â”œâ”€â”€ MessageList/            # æ¶ˆæ¯åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ index.tsx           # ä½¿ç”¨ @ant-design/x Conversations
â”‚   â”‚   â”œâ”€â”€ MessageBubble.tsx   # ä½¿ç”¨ @ant-design/x Bubble
â”‚   â”‚   â”œâ”€â”€ ThinkingProcess.tsx # ä½¿ç”¨ @ant-design/x ThoughtChain
â”‚   â”‚   â””â”€â”€ ToolCallDisplay.tsx
â”‚   â”œâ”€â”€ InputArea/              # è¾“å…¥åŒºåŸŸ
â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â””â”€â”€ ChatSender.tsx      # ä½¿ç”¨ @ant-design/x Sender
â”‚   â”œâ”€â”€ PromptSuggestions/      # å¿«æ·æç¤ºè¯
â”‚   â”‚   â””â”€â”€ index.tsx           # ä½¿ç”¨ @ant-design/x Prompts
â”‚   â””â”€â”€ SettingsPanel/          # è®¾ç½®é¢æ¿
â”‚       â”œâ”€â”€ index.tsx
â”‚       â”œâ”€â”€ ModelSelector.tsx
â”‚       â””â”€â”€ OptionsToggle.tsx
â””â”€â”€ styles/
    â””â”€â”€ index.module.css
```

### 4.2 çŸ¥è¯†åº“é¡µé¢ (KnowledgePage)

#### 4.2.1 ç•Œé¢å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  çŸ¥è¯†åº“åˆ—è¡¨ (Tab 1) | æ–‡æ¡£ç®¡ç† (Tab 2) | è§’è‰²é¢„è®¾ (Tab 3) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  + æ–°å»ºçŸ¥è¯†åº“  [æœç´¢æ¡†]                   â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚
â”‚  â”‚  â”‚  çŸ¥è¯†åº“å¡ç‰‡ 1  â”‚  â”‚  çŸ¥è¯†åº“å¡ç‰‡ 2  â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  æ ‡é¢˜          â”‚  â”‚  æ ‡é¢˜          â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  æè¿°          â”‚  â”‚  æè¿°          â”‚  â”‚           â”‚
â”‚  â”‚  â”‚  æ–‡æ¡£æ•° | æ“ä½œ â”‚  â”‚  æ–‡æ¡£æ•° | æ“ä½œ â”‚  â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.2.2 ç»„ä»¶æ‹†åˆ†
```
KnowledgePage/
â”œâ”€â”€ index.tsx
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ KnowledgeBaseTab/       # çŸ¥è¯†åº“åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”œâ”€â”€ KBCard.tsx
â”‚   â”‚   â””â”€â”€ KBModal.tsx
â”‚   â”œâ”€â”€ DocumentTab/            # æ–‡æ¡£ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”œâ”€â”€ DocumentList.tsx
â”‚   â”‚   â”œâ”€â”€ DocumentModal.tsx
â”‚   â”‚   â””â”€â”€ MarkdownEditor/
â”‚   â””â”€â”€ RolePresetTab/          # è§’è‰²é¢„è®¾
â”‚       â”œâ”€â”€ index.tsx
â”‚       â”œâ”€â”€ PresetCard.tsx
â”‚       â””â”€â”€ PresetModal.tsx
â””â”€â”€ styles/
    â””â”€â”€ index.module.css
```

### 4.3 å…¬å…±ç»„ä»¶

#### 4.3.1 æ¶ˆæ¯æ°”æ³¡ç»„ä»¶
```tsx
// components/MessageBubble/index.tsx
import { Avatar, Card } from 'antd';
import { UserOutlined, RobotOutlined } from '@ant-design/icons';
import ReactMarkdown from 'react-markdown';

interface MessageBubbleProps {
  role: 'user' | 'assistant';
  content: string;
  timestamp?: string;
  thinking?: string;
  tools?: ToolCall[];
}

export const MessageBubble: React.FC<MessageBubbleProps> = ({
  role,
  content,
  timestamp,
  thinking,
  tools
}) => {
  const isUser = role === 'user';
  
  return (
    <div className={`message-bubble ${isUser ? 'user' : 'assistant'}`}>
      <Avatar 
        icon={isUser ? <UserOutlined /> : <RobotOutlined />}
        style={{
          backgroundColor: isUser ? '#1677ff' : '#f0f5ff',
          color: isUser ? '#fff' : '#1677ff'
        }}
      />
      <Card className="message-content">
        {thinking && <ThinkingProcess content={thinking} />}
        <ReactMarkdown>{content}</ReactMarkdown>
        {tools && <ToolCallDisplay calls={tools} />}
        <div className="timestamp">{timestamp}</div>
      </Card>
    </div>
  );
};
```

#### 4.3.2 æµå¼è¾“å…¥æ˜¾ç¤º
```tsx
// components/StreamingText/index.tsx
import { useEffect, useState } from 'react';
import { motion } from 'framer-motion';

interface StreamingTextProps {
  text: string;
  speed?: number;
}

export const StreamingText: React.FC<StreamingTextProps> = ({ 
  text, 
  speed = 20 
}) => {
  return (
    <motion.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      transition={{ duration: 0.3 }}
    >
      {text}
      <motion.span
        animate={{ opacity: [1, 0] }}
        transition={{ repeat: Infinity, duration: 0.8 }}
        className="cursor"
      >
        â–Š
      </motion.span>
    </motion.div>
  );
};
```

---

## äº”ã€æ ·å¼ç³»ç»Ÿé‡æ„

### 5.1 CSS å˜é‡å®šä¹‰ï¼ˆæ¨èæ–¹æ¡ˆä¸€ï¼‰
```css
/* styles/theme.css */
:root {
  /* ä¸»è‰²è°ƒ */
  --primary-color: #1677ff;
  --primary-light: #4096ff;
  --primary-lighter: #e6f4ff;
  --primary-dark: #0958d9;
  
  /* èƒŒæ™¯è‰² */
  --bg-primary: #ffffff;
  --bg-secondary: #f5f8fc;
  --bg-tertiary: #f0f5ff;
  --bg-hover: #fafbfc;
  
  /* æ–‡å­—é¢œè‰² */
  --text-primary: #1d2129;
  --text-secondary: #4e5969;
  --text-tertiary: #86909c;
  --text-disabled: #c9cdd4;
  
  /* è¾¹æ¡† */
  --border-color: #e5e8ef;
  --border-hover: #91caff;
  --border-active: #1677ff;
  
  /* é˜´å½± */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.03);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
  --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.12);
  
  /* åœ†è§’ */
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 12px;
  
  /* é—´è· */
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 16px;
  --spacing-lg: 24px;
  --spacing-xl: 32px;
}
```

### 5.2 Ant Design ConfigProvider é…ç½®
```tsx
// App.tsx
import { ConfigProvider, theme } from 'antd';

<ConfigProvider
  theme={{
    token: {
      colorPrimary: '#1677ff',
      colorBgContainer: '#ffffff',
      colorBgLayout: '#f5f8fc',
      borderRadius: 8,
      fontSize: 14,
      colorText: '#1d2129',
      colorTextSecondary: '#4e5969',
      colorBorder: '#e5e8ef',
    },
    components: {
      Layout: {
        headerBg: '#ffffff',
        bodyBg: '#fafbfc',
        siderBg: '#ffffff',
      },
      Card: {
        borderRadius: 12,
        boxShadow: '0 1px 2px rgba(0, 0, 0, 0.03)',
      },
      Button: {
        borderRadius: 8,
        primaryShadow: '0 2px 0 rgba(22, 119, 255, 0.1)',
      },
      Input: {
        borderRadius: 8,
        controlHeight: 40,
      },
      Message: {
        contentBg: '#ffffff',
      },
    },
  }}
>
  {/* åº”ç”¨å†…å®¹ */}
</ConfigProvider>
```

---

## å…­ã€åŠ¨ç”»ä¸äº¤äº’

### 6.1 é¡µé¢è¿‡æ¸¡åŠ¨ç”»
```tsx
// ä½¿ç”¨ framer-motion
import { motion, AnimatePresence } from 'framer-motion';

const pageVariants = {
  initial: { opacity: 0, y: 20 },
  animate: { opacity: 1, y: 0 },
  exit: { opacity: 0, y: -20 }
};

<AnimatePresence mode="wait">
  <motion.div
    key={currentPage}
    variants={pageVariants}
    initial="initial"
    animate="animate"
    exit="exit"
    transition={{ duration: 0.3 }}
  >
    {renderPage()}
  </motion.div>
</AnimatePresence>
```

### 6.2 æ¶ˆæ¯å…¥åœºåŠ¨ç”»
```tsx
const messageVariants = {
  hidden: { opacity: 0, x: -20 },
  visible: { 
    opacity: 1, 
    x: 0,
    transition: {
      type: 'spring',
      stiffness: 300,
      damping: 30
    }
  }
};

<motion.div
  variants={messageVariants}
  initial="hidden"
  animate="visible"
>
  <MessageBubble {...props} />
</motion.div>
```

---

## ä¸ƒã€å“åº”å¼è®¾è®¡

### 7.1 æ–­ç‚¹å®šä¹‰
```css
/* æ‰‹æœº */
@media (max-width: 576px) {
  /* éšè—ä¾§è¾¹æ ï¼Œæ”¹ä¸ºæŠ½å±‰ */
  .conversation-sidebar {
    display: none;
  }
}

/* å¹³æ¿ */
@media (min-width: 577px) and (max-width: 992px) {
  .conversation-sidebar {
    width: 240px;
  }
}

/* æ¡Œé¢ */
@media (min-width: 993px) {
  .conversation-sidebar {
    width: 280px;
  }
}
```

### 7.2 ç§»åŠ¨ç«¯é€‚é…
- ä¾§è¾¹æ æ”¹ä¸ºæŠ½å±‰ï¼ˆDrawerï¼‰
- è¾“å…¥æ¡†å·¥å…·æ æŠ˜å 
- å‡å°‘å¡ç‰‡å†…è¾¹è·
- è°ƒæ•´å­—ä½“å¤§å°

---

## å…«ã€å®æ–½æ­¥éª¤

### Phase 1: åŸºç¡€æ¶æ„ï¼ˆWeek 1ï¼‰
1. âœ… å®‰è£…ä¾èµ–ï¼ˆå·²å®Œæˆ @ant-design/x-sdkï¼‰
2. ğŸ”² é…ç½®æ–°çš„ä¸»é¢˜å˜é‡å’Œæ ·å¼ç³»ç»Ÿ
3. ğŸ”² é‡æ„ App.tsxï¼Œåº”ç”¨æ–°çš„ ConfigProvider é…ç½®
4. ğŸ”² åˆ›å»ºåŸºç¡€ç»„ä»¶åº“æ–‡ä»¶å¤¹ç»“æ„

### Phase 2: èŠå¤©é¡µé¢é‡æ„ï¼ˆWeek 2ï¼‰
1. ğŸ”² æ‹†åˆ† ChatPage ç»„ä»¶
2. ğŸ”² å®ç° XRequest æµå¼è¯·æ±‚
3. ğŸ”² å¼€å‘æ¶ˆæ¯æ°”æ³¡ç»„ä»¶
4. ğŸ”² æ·»åŠ æ€è€ƒè¿‡ç¨‹å’Œå·¥å…·è°ƒç”¨å±•ç¤º
5. ğŸ”² å®ç°ä¼šè¯ä¾§è¾¹æ 

### Phase 3: çŸ¥è¯†åº“é¡µé¢é‡æ„ï¼ˆWeek 3ï¼‰
1. ğŸ”² é‡æ„çŸ¥è¯†åº“åˆ—è¡¨å±•ç¤º
2. ğŸ”² ä¼˜åŒ–æ–‡æ¡£ç®¡ç†ç•Œé¢
3. ğŸ”² æ”¹è¿›è§’è‰²é¢„è®¾ç®¡ç†
4. ğŸ”² ç»Ÿä¸€å¡ç‰‡æ ·å¼

### Phase 4: ç»†èŠ‚ä¼˜åŒ–ï¼ˆWeek 4ï¼‰
1. ğŸ”² æ·»åŠ é¡µé¢è¿‡æ¸¡åŠ¨ç”»
2. ğŸ”² å®ç°å“åº”å¼å¸ƒå±€
3. ğŸ”² æ€§èƒ½ä¼˜åŒ–
4. ğŸ”² æµ‹è¯•ä¸ Bug ä¿®å¤

---

## ä¹ã€å…³é”®æŠ€æœ¯ç‚¹

### 9.1 XRequest ä½¿ç”¨ç¤ºä¾‹
```typescript
import { XRequest } from '@ant-design/x-sdk';

// æµå¼èŠå¤©è¯·æ±‚
const streamChat = async (message: string) => {
  const streamedContent = [];
  
  await XRequest('http://localhost:8000/api/chat/stream', {
    params: {
      message,
      conversation_id: conversationId,
      provider: selectedProvider,
      model: selectedModel,
    },
    callbacks: {
      onUpdate: (chunk) => {
        // å®æ—¶æ›´æ–°
        streamedContent.push(chunk);
        setStreamingContent(streamedContent.join(''));
      },
      onSuccess: (messages) => {
        // å®Œæˆ
        console.log('Chat completed', messages);
        setLoading(false);
      },
      onError: (error) => {
        console.error('Chat error', error);
        message.error('å‘é€å¤±è´¥');
        setLoading(false);
      },
    },
  });
};
```

### 9.2 Markdown æ¸²æŸ“ä¼˜åŒ–
```tsx
import ReactMarkdown from 'react-markdown';
import { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';
import { oneLight } from 'react-syntax-highlighter/dist/esm/styles/prism';

<ReactMarkdown
  components={{
    code({ node, inline, className, children, ...props }) {
      const match = /language-(\w+)/.exec(className || '');
      return !inline && match ? (
        <SyntaxHighlighter
          style={oneLight}
          language={match[1]}
          PreTag="div"
          {...props}
        >
          {String(children).replace(/\n$/, '')}
        </SyntaxHighlighter>
      ) : (
        <code className={className} {...props}>
          {children}
        </code>
      );
    },
  }}
>
  {content}
</ReactMarkdown>
```

---

## åã€æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **è™šæ‹Ÿæ»šåŠ¨**: æ¶ˆæ¯åˆ—è¡¨è¶…è¿‡ 100 æ¡æ—¶ä½¿ç”¨ `react-window`
2. **æ‡’åŠ è½½**: å›¾ç‰‡å’Œä»£ç å—å»¶è¿ŸåŠ è½½
3. **é˜²æŠ–èŠ‚æµ**: è¾“å…¥æ¡†ã€æœç´¢æ¡†ä½¿ç”¨é˜²æŠ–
4. **Memo ä¼˜åŒ–**: æ¶ˆæ¯ç»„ä»¶ä½¿ç”¨ `React.memo`
5. **ä»£ç åˆ†å‰²**: è·¯ç”±çº§åˆ«çš„ä»£ç åˆ†å‰²

---

## åä¸€ã€æ–‡ä»¶ç»“æ„å»ºè®®

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.tsx
â”‚   â”œâ”€â”€ main.tsx
â”‚   â”œâ”€â”€ components/          # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ MessageBubble/
â”‚   â”‚   â”œâ”€â”€ StreamingText/
â”‚   â”‚   â”œâ”€â”€ MarkdownRenderer/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ ChatPage/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â””â”€â”€ styles/
â”‚   â”‚   â”œâ”€â”€ KnowledgePage/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â””â”€â”€ styles/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ hooks/              # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ useXRequest.ts
â”‚   â”‚   â”œâ”€â”€ useStreamChat.ts
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”œâ”€â”€ theme.css       # ä¸»é¢˜å˜é‡
â”‚   â”‚   â”œâ”€â”€ global.css      # å…¨å±€æ ·å¼
â”‚   â”‚   â””â”€â”€ reset.css       # æ ·å¼é‡ç½®
â”‚   â”œâ”€â”€ utils/
â”‚   â””â”€â”€ api/
```

---

## åäºŒã€æ€»ç»“

### æ ¸å¿ƒæ”¹è¿›ç‚¹
1. âœ… ä½¿ç”¨ `@ant-design/x-sdk` çš„ XRequest å¤„ç†æµå¼å¯¹è¯
2. âœ… é‡‡ç”¨ç™½è‰²ä¸ºä¸»ã€æµ…è“è‰²ä¸ºè¾…çš„æ¸…æ–°é…è‰²
3. âœ… ç»„ä»¶åŒ–é‡æ„ï¼Œæé«˜å¯ç»´æŠ¤æ€§
4. âœ… æ·»åŠ æµç•…çš„åŠ¨ç”»æ•ˆæœ
5. âœ… å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒå¤šç«¯

### é¢„æœŸæ•ˆæœ
- æ›´ç®€æ´ç¾è§‚çš„ç•Œé¢
- æ›´æµç•…çš„ç”¨æˆ·ä½“éªŒ
- æ›´å¥½çš„ä»£ç ç»„ç»‡
- æ›´é«˜çš„å¼€å‘æ•ˆç‡

### é£é™©æ§åˆ¶
- åˆ†é˜¶æ®µå®æ–½ï¼Œç¡®ä¿æ¯ä¸ªé˜¶æ®µå¯äº¤ä»˜
- ä¿ç•™åŸæœ‰åŠŸèƒ½ï¼Œæ¸è¿›å¼é‡æ„
- å……åˆ†æµ‹è¯•ï¼Œé¿å…åŠŸèƒ½å›é€€

---

**å»ºè®®é…è‰²æ–¹æ¡ˆ**: æ–¹æ¡ˆä¸€ï¼ˆæ¸…æ–°æ·¡é›…ï¼‰  
**ä¼˜å…ˆçº§**: Phase 1 > Phase 2 > Phase 3 > Phase 4  
**é¢„ä¼°å·¥æœŸ**: 4 å‘¨ï¼ˆå¯æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ï¼‰

---

## é™„å½•ï¼šå‚è€ƒèµ„æº

- Ant Design å®˜ç½‘: https://ant.design/
- @ant-design/x-sdk æ–‡æ¡£: https://x.ant.design/x-sdks/introduce
- Framer Motion: https://www.framer.com/motion/
- React Markdown: https://remarkjs.github.io/react-markdown/
