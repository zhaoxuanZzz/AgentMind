openapi: 3.0.3
info:
  title: Role Preset API
  description: è§’è‰²é¢„è®¾ç®¡ç†API
  version: 1.0.0

paths:
  /api/roles:
    get:
      summary: è·å–æ‰€æœ‰è§’è‰²é¢„è®¾åˆ—è¡¨
      description: è¿”å›æ‰€æœ‰å¯ç”¨çš„è§’è‰²é¢„è®¾
      operationId: listRoles
      tags:
        - Roles
      responses:
        '200':
          description: æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                required:
                  - roles
                properties:
                  roles:
                    type: array
                    items:
                      $ref: '#/components/schemas/RolePresetResponse'
              example:
                roles:
                  - id: "software_engineer"
                    name: "è½¯ä»¶å·¥ç¨‹å¸ˆ"
                    description: "ä¸“æ³¨äºä»£ç å¼€å‘ã€æ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é—®é¢˜è§£å†³"
                    icon: "ğŸ‘¨â€ğŸ’»"
                    is_active: true
                  - id: "product_manager"
                    name: "äº§å“ç»ç†"
                    description: "ä¸“æ³¨äºäº§å“è§„åˆ’ã€éœ€æ±‚åˆ†æå’Œç”¨æˆ·ä½“éªŒ"
                    icon: "ğŸ“Š"
                    is_active: true

  /api/roles/{role_id}:
    get:
      summary: è·å–ç‰¹å®šè§’è‰²é¢„è®¾è¯¦æƒ…
      description: è¿”å›æŒ‡å®šè§’è‰²çš„å®Œæ•´ä¿¡æ¯
      operationId: getRole
      tags:
        - Roles
      parameters:
        - name: role_id
          in: path
          required: true
          schema:
            type: string
            enum:
              - software_engineer
              - product_manager
              - marketing
              - translator
              - research_assistant
          description: è§’è‰²ID
          example: "software_engineer"
      responses:
        '200':
          description: æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RolePresetDetailResponse'
              example:
                id: "software_engineer"
                name: "è½¯ä»¶å·¥ç¨‹å¸ˆ"
                description: "ä¸“æ³¨äºä»£ç å¼€å‘ã€æ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é—®é¢˜è§£å†³"
                system_prompt: "ä½ æ˜¯ä¸€ä½èµ„æ·±è½¯ä»¶å·¥ç¨‹å¸ˆï¼Œæ“…é•¿ï¼š\n- ç¼–å†™é«˜è´¨é‡ã€å¯ç»´æŠ¤çš„ä»£ç \n- è®¾è®¡æ¸…æ™°çš„ç³»ç»Ÿæ¶æ„..."
                config:
                  temperature: 0.3
                  max_tokens: 4096
                icon: "ğŸ‘¨â€ğŸ’»"
                is_active: true
                created_at: "2026-01-26T10:00:00Z"
        '404':
          description: è§’è‰²ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              example:
                detail: "Role not found: invalid_role"

components:
  schemas:
    RolePresetResponse:
      type: object
      required:
        - id
        - name
        - description
        - is_active
      properties:
        id:
          type: string
          description: è§’è‰²å”¯ä¸€æ ‡è¯†ç¬¦
          example: "software_engineer"
        name:
          type: string
          description: è§’è‰²æ˜¾ç¤ºåç§°
          example: "è½¯ä»¶å·¥ç¨‹å¸ˆ"
        description:
          type: string
          description: è§’è‰²æè¿°
          example: "ä¸“æ³¨äºä»£ç å¼€å‘ã€æ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é—®é¢˜è§£å†³"
        icon:
          type: string
          nullable: true
          description: è§’è‰²å›¾æ ‡ï¼ˆemojiæˆ–URLï¼‰
          example: "ğŸ‘¨â€ğŸ’»"
        is_active:
          type: boolean
          description: æ˜¯å¦å¯ç”¨
          example: true

    RolePresetDetailResponse:
      allOf:
        - $ref: '#/components/schemas/RolePresetResponse'
        - type: object
          required:
            - system_prompt
            - config
            - created_at
          properties:
            system_prompt:
              type: string
              description: ç³»ç»Ÿæç¤ºè¯ï¼ˆå®Œæ•´å†…å®¹ï¼‰
              example: "ä½ æ˜¯ä¸€ä½èµ„æ·±è½¯ä»¶å·¥ç¨‹å¸ˆï¼Œæ“…é•¿..."
            config:
              type: object
              description: LLMé…ç½®å‚æ•°
              properties:
                temperature:
                  type: number
                  format: float
                  minimum: 0
                  maximum: 2
                  description: æ¸©åº¦å‚æ•°
                  example: 0.3
                max_tokens:
                  type: integer
                  minimum: 1
                  description: æœ€å¤§tokenæ•°
                  example: 4096
              additionalProperties: true
            created_at:
              type: string
              format: date-time
              description: åˆ›å»ºæ—¶é—´
              example: "2026-01-26T10:00:00Z"

    ErrorResponse:
      type: object
      required:
        - detail
      properties:
        detail:
          type: string
          description: é”™è¯¯è¯¦æƒ…
          example: "Role not found"
